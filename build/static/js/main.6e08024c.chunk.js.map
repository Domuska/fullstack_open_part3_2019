{"version":3,"sources":["services.js","components/Filter.js","components/PersonForm.js","components/PhoneBookEntries.js","components/InfoBox.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","newPerson","post","id","put","delete","Filter","searchTerm","handleSearchChange","value","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","addPersonClickHandler","type","onClick","Entry","name","number","PhoneBookEntries","people","deletePersonClickHandler","map","person","key","InfoBox","text","isError","className","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchTerm","info","setInfo","filteredPersons","setFilteredPersons","useEffect","console","log","services","catch","err","error","passesFilter","toLowerCase","includes","setInfoBox","setTimeout","event","newTerm","target","filter","preventDefault","found","find","window","confirm","updatedPerson","responsePerson","p","response","status","concat","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6e08024c.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  return axios\n    .get(baseUrl)\n    .then(res => res.data);\n}\n\nconst update = (newPerson, id) => {\n  return axios\n    .put(`${baseUrl}/${id}`, newPerson)\n    .then(res => res.data);\n}\n\nconst create = (newPerson) => {\n  return axios\n    .post(baseUrl, newPerson)\n    .then(res => res.data);\n\n}\n\nconst deletePerson = (id) => {\n  return axios\n    .delete(`${baseUrl}/${id}`)\n    .then(res => res.data);\n}\n\n\nexport default {getAll, create, update, deletePerson };","import React from 'react'\n\n\nconst Filter = ({searchTerm, handleSearchChange}) => {\n  return (\n    <div>\n      search:\n      <input\n        value={searchTerm}\n        onChange={handleSearchChange}\n      ></input>\n    </div>\n  )\n}\n\nexport default Filter;","import React from 'react'\n\nconst PersonForm = ({newName, handleNameChange, newNumber, handleNumberChange, addPersonClickHandler}) => {\n  return (\n    <form>\n      <div>\n        name: \n        <input \n          value={newName}\n          onChange={handleNameChange}\n        />\n        <br></br>\n        number: \n        <input\n          value={newNumber}\n          onChange={handleNumberChange}\n        ></input>\n      </div>\n      <div>\n        <button type=\"submit\" onClick={addPersonClickHandler}>add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm;","import React from 'react'\n\nconst Entry = ({ name, number }) => {\n  return (\n    <li>\n      {name} : {number}\n    </li>\n  )\n};\n\nconst PhoneBookEntries = ({ people, deletePersonClickHandler }) => {\n  const getRows = () => { \n    return people.map(person => \n      <div key={person.id}>\n        <Entry \n          number={person.number} \n          name={person.name} \n        ></Entry>\n\n        <button \n          onClick={() => deletePersonClickHandler(person)}>\n          delete\n        </button>\n\n      </div>\n    );\n  };\n  \n  return (\n    <ul>\n      {getRows()}\n    </ul>\n  )\n};\n\nexport default PhoneBookEntries;","import React from 'react';\nimport './InfoBox.css';\n\n\nconst InfoBox = ({ text, isError }) => {\n\n  if(text === null) {\n    return null;\n  }\n  \n  const successClass = () => {\n    if (isError) return 'info-box error-box'\n    return 'info-box success-box'\n  }\n\n  return(\n    <div className={successClass()}>\n      {text}\n    </div>\n  );\n};\n\nexport default InfoBox;","import React, { useState, useEffect  } from 'react'\n\nimport services from './services';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport PhoneBookEntries from './components/PhoneBookEntries';\nimport InfoBox from './components/InfoBox';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ searchTerm, setSearchTerm ] = useState('');\n  const [ info, setInfo ] = useState({text: null, isError: false});\n\n  const [ filteredPersons, setFilteredPersons] = useState([]);\n\n  useEffect(() => {\n    console.log('useEffect called');\n    \n    services\n      .getAll()\n      .then(people => {\n        console.log('response:', people);\n        setPersons(people);\n        setFilteredPersons(people);\n      })\n      .catch(err => {\n        console.error('error at fetching json:', err);\n      });\n  }, []);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  // for checking if a single name passes the search filter\n  function passesFilter(name, searchTerm) {\n    return name.toLowerCase().includes(searchTerm.toLowerCase());\n  }\n\n  const handleSearchChange = (event) => {\n    const { value: newTerm } = event.target;\n    setSearchTerm(newTerm);\n    if (newTerm !== '') {\n      setFilteredPersons(persons.filter(person => passesFilter(person.name, newTerm)));\n    } else {\n      setFilteredPersons(persons);\n    }\n  }\n\n  // helper for interacting with the info box object\n  const setInfoBox = (text, isError) => {\n    setInfo({text, isError});\n    setTimeout(() => {\n      setInfo({text: null})\n    }, 5000)\n  }\n\n  const addPersonClickHandler = (event) => {\n    event.preventDefault();\n\n    const found = persons.find(person => person.name === newName);\n\n    if (found) {\n      // update if user so wishes\n      const shouldUpdate = window.confirm(`Update person's ${found.name} number?`);\n      if (shouldUpdate) {\n        const updatedPerson = {...found, number:newNumber};\n      services\n        .update(updatedPerson,updatedPerson.id)\n        .then(responsePerson => {\n          setPersons(persons.map(p => p.id !== found.id ? p : responsePerson));\n          setFilteredPersons(filteredPersons.map(p => p.id !== found.id ? p : responsePerson));\n          setInfoBox(`Updated person ${responsePerson.name}`, false)\n        })\n        .catch(err => {\n          if (err.response.status === 404) {\n            // remove the person from lists\n            setPersons(persons.filter(p => p.id !== found.id));\n            setFilteredPersons(persons.filter(p => p.id !== found.id));\n            setInfoBox(`Failed to update person ${found.name} number, person not found on server`, true);\n          } else {\n            console.error(err);\n            setInfoBox(`Failed to update person ${found.name} number, unknown error`, true);\n          }\n        });\n      }\n\n    } else {\n      // add new person\n      const newPerson = {name: newName, number: newNumber};\n\n      services\n        .create(newPerson)\n        .then(person => {\n          setPersons(persons.concat(person));\n          setInfoBox(`Added person ${person.name}`, false)\n          // check if the new person passes the filter that might be set\n          if (passesFilter(person.name, searchTerm)) {\n            setFilteredPersons(filteredPersons.concat(person));\n          }\n        })\n        .catch(err => {\n          alert('Error while adding new person');\n          console.err(err);\n        })\n      \n      setNewName('');\n      setNewNumber('');\n    }\n  };\n\n  const deletePersonClickHandler = (person) => {\n    const shouldDelete = window.confirm(`Delete person ${person.name}?`);\n    if (shouldDelete) {\n      services\n      .deletePerson(person.id)\n      .then(res => {\n        setPersons(persons.filter(p => p.id !== person.id));\n        setFilteredPersons(filteredPersons.filter(p => p.id !== person.id));\n        setInfoBox(`Removed person ${person.name}`, false);\n      })\n      .catch(err => {\n        alert('Error while deleting person');\n        console.error(err);\n      })\n    }\n  }\n\n  return (\n    <div>\n\n      <h2>Phonebook</h2>\n\n      <InfoBox text={info.text} isError={info.isError}></InfoBox>\n\n      <h3>Search</h3>\n      <Filter\n        searchTerm={searchTerm}\n        handleSearchChange={handleSearchChange}\n      ></Filter>\n      \n      <h3>Add new person</h3>\n      <PersonForm\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n        addPersonClickHandler={addPersonClickHandler}\n      ></PersonForm>\n\n      <h3>Numbers</h3>\n      <PhoneBookEntries\n        people={filteredPersons}\n        deletePersonClickHandler={deletePersonClickHandler}\n      ></PhoneBookEntries>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}